<DOCTYPE html>
    <html>
        <head>
            <title>World editor</title>
            <link rel="stylesheet" href="styles.css" />
        </head>
        <body>
            <h1>World editor (typescript)</h1>
            <canvas id="myCanvas"></canvas>
            <div id="controls"></div>

            <script src="generatedFiles/math/graph.js"></script>
            <script src="generatedFiles/viewport.js"></script>
            <script src="generatedFiles/math/utils.js"></script>
            <script src="generatedFiles/graphEditor.js"></script>
            <script src="generatedFiles/primitives/point.js"></script>
            <script src="generatedFiles/primitives/segment.js"></script>
            <script>
                myCanvas.width = 600;
                myCanvas.height = 600;
                var canvas = document.getElementById('myCanvas');
                var ctx = canvas.getContext('2d');

                const p1 = new Point(200, 200);
                const p2 = new Point(500, 200);
                const p3 = new Point(400, 400);
                const p4 = new Point(100, 300);

                const s1 = new Segment(p1, p2);
                const s2 = new Segment(p1, p3);
                const s3 = new Segment(p1, p4);
                const s4 = new Segment(p2, p3);

                const graph = new Graph([p1, p2, p3, p4], [s1, s2, s3, s4]);
                const viewport = new Viewport(canvas);
                const graphEditor = new GraphEditor(viewport, graph);
                animate();

                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.save();
                    ctx.translate(viewport.center.x, viewport.center.y);
                    ctx.scale(1 / viewport.zoom, 1 / viewport.zoom);
                    const offset = viewport.getOffset();
                    ctx.translate(offset.x, offset.y);
                    graphEditor.display();
                    ctx.restore();
                    requestAnimationFrame(animate);
                }
            </script>
        </body>
    </html></DOCTYPE
>
