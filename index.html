<DOCTYPE html>
    <html>
        <head>
            <title>World editor</title>
            <link rel="stylesheet" href="styles.css" />
        </head>
        <body>
            <h1>World editor (typescript)</h1>
            <canvas id="myCanvas"></canvas>
            <div id="controls">
                <button onClick="dispose()">üóëÔ∏è</button>
                <button onClick="save()">üíæ</button>
            </div>

            <script src="generatedFiles/math/graph.js"></script>
            <script src="generatedFiles/viewport.js"></script>
            <script src="generatedFiles/math/utils.js"></script>
            <script src="generatedFiles/graphEditor.js"></script>
            <script src="generatedFiles/primitives/point.js"></script>
            <script src="generatedFiles/primitives/segment.js"></script>
            <script>
                myCanvas.width = 600;
                myCanvas.height = 600;
                var canvas = document.getElementById('myCanvas');
                var ctx = canvas.getContext('2d');

                const graphJson = localStorage.getItem('graph');
                const graph = graphJson ? Graph.load(JSON.parse(graphJson)) : new Graph([], []);
                const viewport = new Viewport(canvas);
                const graphEditor = new GraphEditor(viewport, graph);

                animate();

                function animate() {
                    viewport.reset();
                    graphEditor.display();
                    requestAnimationFrame(animate);
                }

                function dispose() {
                    graphEditor.dispose();
                }

                function save() {
                    localStorage.setItem('graph', JSON.stringify(graph));
                }
            </script>
        </body>
    </html></DOCTYPE
>
